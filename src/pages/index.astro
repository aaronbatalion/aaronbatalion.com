---
import BaseLayout from '../layouts/BaseLayout.astro';
import PlatformIcon from '../components/PlatformIcon.astro';
import linksData from '../../data/links.json';

const posts = linksData.sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());

function formatDate(dateStr: string): string {
  const date = new Date(dateStr);
  return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
}

function formatDateISO(dateStr: string): string {
  return new Date(dateStr).toISOString().split('T')[0];
}

function getPlatform(url: string): string {
  if (!url) return 'Web';
  if (url.includes('medium.com')) return 'Medium';
  if (url.includes('x.com') || url.includes('twitter.com')) return 'X';
  if (url.includes('linkedin.com')) return 'LinkedIn';
  if (url.includes('threads.net')) return 'Threads';
  return 'Web';
}
---

<BaseLayout title="Hi! I'm Aaron Batalion!">
  <section class="header">
    <div class="container">
      <div class="content">
        <a href="/" title="avatar"><div id="avatar-image" aria-label="avatar"></div></a>
        <a href="/"><div class="name">Aaron Batalion</div></a>
        <nav>
          <ul>
            <li class="nav-about"><a href="/about/"><span>About</span></a></li>
          </ul>
        </nav>
      </div>
    </div>
  </section>

  <!-- svg icons: https://github.com/larsenwork/web.svg.min/tree/master/ -->
  <section class="icons">
    <div class="container">
      <div class="content">
        <a title="X" href="//x.com/abatalion" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
        </a>
        <a title="Medium" href="//medium.com/@abatalion" target="_blank" rel="noopener">
          <svg viewBox="0 0 800 800"><path d="M650 267v328c0 14-12 20-28 12l-139-70 167-270z" fill-opacity=".4"/><path d="M374 360l101-164c4-7 14-10 22-6l153 77-167 270-109-177z" fill-opacity=".6"/><path d="M483 537l-170-85 4-185 166 270z" fill-opacity=".8"/><path d="M317 595c0 14-10 20-23 14l-130-65c-8-4-14-13-14-22V204c0-11 7-17 18-12l149 75v328z"/></svg>
        </a>
        <a title="LinkedIn" href="//linkedin.com/in/aaronbatalion" target="_blank" rel="noopener">
          <svg viewBox="0 0 800 800"><path d="M268 629h-97V319h97zm157 0h-97V319h93v42h1q31-50 93-50 114 0 114 133v185h-96V466q0-70-49-70-59 0-59 69z"/><circle cx="219" cy="220" r="56"/></svg>
        </a>
        <a title="Threads" href="//threads.net/@abatalion" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24"><path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.5 12.068V12c.009-3.508.865-6.37 2.543-8.512C5.868 1.228 8.59.024 12.157 0h.025c2.522.015 4.654.628 6.336 1.822.63.448 1.186.97 1.654 1.54l-1.468 1.478c-.37-.463-.828-.885-1.359-1.246-1.312-.893-3.003-1.362-4.98-1.375h-.03c-2.855.02-5.02.948-6.435 2.757-1.258 1.607-1.91 3.89-1.918 6.79v.232c.008 2.899.66 5.178 1.935 6.782 1.426 1.795 3.6 2.714 6.462 2.732h.013c2.382-.026 4.227-.774 5.484-2.221 1.013-1.167 1.587-2.762 1.706-4.743-.508.271-1.058.487-1.643.636-.585.15-1.2.224-1.833.22h-.014c-3.348-.02-5.404-2.093-5.404-5.448 0-3.317 2.098-5.433 5.347-5.433h.014c1.626.01 2.96.536 3.968 1.564.94.96 1.538 2.308 1.776 4.006l.032.23-.006.035c-.02.115-.055.355-.085.488-.094.412-.223.8-.386 1.166a7.11 7.11 0 01-.558 1.037c-.36.559-.848 1.117-1.572 1.572-.722.453-1.618.763-2.745.84-.185.013-.386.02-.6.019h-.014c-2.096-.014-3.632-.753-4.57-2.198-.756-1.164-1.133-2.654-1.122-4.435l.002-.095c.02-1.73.404-3.167 1.141-4.275.885-1.329 2.222-2.05 3.988-2.148l.097-.004c1.595.017 2.91.458 3.908 1.313.927.795 1.564 1.91 1.896 3.312l-1.765.425c-.248-1.033-.702-1.836-1.352-2.393-.699-.599-1.632-.924-2.77-.936h-.044c-1.215.07-2.132.541-2.725 1.401-.548.794-.838 1.881-.864 3.234v.099c-.008 1.455.276 2.617.844 3.455.607.895 1.564 1.366 2.846 1.4h.015c.17 0 .328-.005.476-.016.785-.053 1.407-.248 1.899-.545a3.4 3.4 0 00.99-.975 4.4 4.4 0 00.363-.615l.057-.12z"/></svg>
        </a>
      </div>
    </div>
  </section>

  <section class="main">
    <div class="container">
      <div class="content">
        <div class="page-heading">Some Thoughts</div>
        <ul>
          {posts.map((post) => (
            <li class="post-item">
              <span class="meta">
                <time datetime={formatDateISO(post.date)}>{formatDate(post.date)}</time>
              </span>
              <span class="icon-container" style="margin-right: 10px; display: inline-flex; align-items: center; color: #666;">
                 <PlatformIcon platform={getPlatform(post.url)} />
              </span>
              <span class="post-link">
                <a target="_blank" rel="noopener" href={post.url}>
                  <span>{post.title}</span>
                </a>
              </span>
            </li>
          ))}
        </ul>
      </div>
    </div>
  </section>
</BaseLayout>
